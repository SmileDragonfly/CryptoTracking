#19092023
1. Start minikube: minikube start
2. Check docker context if error: docker context ls (--> need to start docker?)
3. Check docker: docker context show
docker version
docker --info
docker system df (Show docker disk usage)
4. Resolve: docker context use default (--> This will update your active context which minikube will pick up)
minikube start
kubectl get pods -A
5. Install helm: Kubernetes package manager (--> Maybe don't need)
6. Deploying PostgreSQL Using Kubernetes: https://sweetcode.io/how-to-deploy-postgresql-instance-to-kubernetes/
6.1. Creating the Volumes (Persistent Volume)
6.2. To allow a cluster to request access to the data storage, you need to set up a PersistentVolumeClaim (PVC) to the corresponding Persistent Volume
(When a pod specifies this PVC in its volume mounts,
the Kubernetes control plane will automatically bind the PVC to an available PV that matches the criteria
(storage class, capacity, access mode, etc.) defined in the PVC and PV configurations.)
6.3. Creating Database Secrets(Databases require access control using passwords and users)
6.4. Creating the Deployment Resource
6.5. Creating the Service Resource (A service exposes a deployment. It provides a stable network endpoint for accessing a cluster)
6.6. Deploy postgresql
-Deploy the PV:
kubectl apply -f ./kubernetes-deploy/db-persistent-volume.yaml
-Deploy the PVC
kubectl apply -f ./kubernetes-deploy/db-volume-claim.yaml
-The environment variables are needed by the cluster. Deploy them as follows:
kubectl apply -f ./kubernetes-deploy/db-configmap.yaml
-Next, create the deployment and add pods replicas.
kubectl apply -f ./kubernetes-deploy/db-deployment.yaml
-Finaly run the service to expose the cluster
kubectl apply -f ./kubernetes-deploy/db-service.yaml
6.7. Testing deployment
kubectl get all
minikube dashboard
kubectl exec -it pod/postgresdb-7b475497d6-gw2w6 -- psql -h localhost -U postgres --password -p 5432 ewallet
*Explain:
kubectl exec: This is the Kubernetes command for executing a command in a running container within a pod.
-it: These flags are used together to indicate that you want an interactive terminal session (-i for interactive and -t for terminal).
pod/postgresdb-7b475497d6-gw2w6: This is the name of the pod where you want to execute the command.
--: This separator is used to separate the kubectl options from the command to be executed inside the container.
psql -h localhost -U postgres --password -p 5432 ewallet: This is the psql command and its arguments. Let's break it down further:
psql: This is the PostgreSQL command-line utility.
-h localhost: This specifies that you want to connect to the PostgreSQL database running on localhost within the pod.
-U postgres: This specifies the username (postgres) to connect to the database.
--password: This flag tells psql to prompt for the password interactively.
-p 5432: This specifies the port number (5432) to connect to the PostgreSQL server.
ewallet: This is the name of the PostgreSQL database to connect to.

6.8. Connect to postgresql database in minikube clust from host machine
https://stackoverflow.com/questions/60710171/minikube-ip-is-not-reachable
*Step:
- Check minikube service list:  minikube service list
- Start tunnel to service:  minikube service postgresdb

#26092023
1. Explore pods
List Pods:              kubectl get pods
Pod Details:            kubectl describe pod <pod_name>
Logs:                   kubectl logs <pod_name>
                        kubectl logs <pod_name> -c <container_name>
Exec into a Pod:        kubectl exec -it <pod_name> -- /bin/bash
Exec into a Container:  kubectl exec -it my-pod -c my-container -- /bin/bash
Port Forwarding:        kubectl port-forward <pod_name> 8080:80
Delete Pod:             kubectl delete pod <pod_name>
View Pod YAML:          kubectl get pod <pod_name> -o yaml
List Pods by Label:     kubectl get pods -l <label_selector>
To list all containers running within a specific pod in Kubernetes: kubectl get pod <pod_name> -n <namespace> -o json
2. SSH to minikube: minikube ssh
Check OS Version: cat /etc/os-release --> Ubuntu 22.04